<?php
/**
 * Product list toolbar - Custom Design
 * @var $block \Magento\Catalog\Block\Product\ProductList\Toolbar
 * @var \Magento\Framework\Escaper $escaper
 */
?>
<?php if ($block->getCollection()->getSize()) :?>
    <?php $widget = $this->helper(\Magento\Framework\Json\Helper\Data::class)->jsonDecode($block->getWidgetOptionsJson());
        $widgetOptions = $this->helper(\Magento\Framework\Json\Helper\Data::class)->jsonEncode($widget['productListToolbarForm']);
    ?>
    <div class="toolbar toolbar-products products-toolbar" data-mage-init='{"productListToolbarForm":<?= /* @noEscape */ $widgetOptions ?>}'>
        <?php if ($block->getIsBottom()): ?>
            <!-- Pagination -->
            <nav class="pagination-wrapper" aria-label="<?= $escaper->escapeHtmlAttr(__('Product pages')) ?>">
                <?= $block->getPagerHtml() ?>
            </nav>
            <?= $block->fetchView($block->getTemplateFile('Magento_Catalog::product/list/toolbar/limiter.phtml')) ?>
        <?php else: ?>
            <!-- Mobile Filter Toggle -->
            <button class="filter-toggle" id="filterToggle">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="4" y1="21" x2="4" y2="14"></line>
                    <line x1="4" y1="10" x2="4" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12" y2="3"></line>
                    <line x1="20" y1="21" x2="20" y2="16"></line>
                    <line x1="20" y1="12" x2="20" y2="3"></line>
                    <line x1="1" y1="14" x2="7" y2="14"></line>
                    <line x1="9" y1="8" x2="15" y2="8"></line>
                    <line x1="17" y1="16" x2="23" y2="16"></line>
                </svg>
                FILTERS & SORTING
            </button>
            
            <div class="toolbar-left">
                <p class="product-count-text">
                    <?php
                    $amountBlock = $block->getChildBlock('toolbar.amount');
                    if ($amountBlock) {
                        echo $amountBlock->toHtml();
                    } else {
                        $collection = $block->getCollection();
                        $total = $collection ? $collection->getSize() : 0;
                    ?>
                        Showing <span class="count-number"><?= $total ?></span> <?= $total == 1 ? __('product') : __('products') ?>
                    <?php } ?>
                </p>
            </div>
            <div class="toolbar-right">
                <div class="sort-wrapper">
                    <label for="sortSelect" class="sort-label"><?= __('Sort By:') ?></label>
                    <?php if ($block->isExpanded()): ?>
                        <?= $block->fetchView($block->getTemplateFile('Magento_Catalog::product/list/toolbar/sorter.phtml')) ?>
                    <?php else: ?>
                        <select class="sort-select" id="sortSelect" data-role="sorter">
                            <option value="position"><?= __('Position') ?></option>
                            <option value="name"><?= __('Name: A to Z') ?></option>
                            <option value="name"><?= __('Name: Z to A') ?></option>
                            <option value="price"><?= __('Price: Low to High') ?></option>
                            <option value="price"><?= __('Price: High to Low') ?></option>
                            <option value="created_at"><?= __('Newest First') ?></option>
                        </select>
                    <?php endif ?>
                </div>
                <div class="view-mode">
                    <button class="view-btn active" data-view="grid" title="<?= __('Grid View') ?>" data-role="mode-switcher" data-value="grid">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                    </button>
                    <button class="view-btn" data-view="list" title="<?= __('List View') ?>" data-role="mode-switcher" data-value="list">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <line x1="3" y1="6" x2="3.01" y2="6"></line>
                            <line x1="3" y1="12" x2="3.01" y2="12"></line>
                            <line x1="3" y1="18" x2="3.01" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
        <?php endif ?>
    </div>
<?php endif ?>

