<?xml version="1.0"?>
<!--
/**
 * Maison de Pierre - Product Detail Page Layout
 * Beautiful and dynamic product page with enhanced content
 */
-->
<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" layout="1column" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">
    <body>
        <attribute name="class" value="catalog-product-view"/>
        
        <!-- Wrap content in custom container for styling -->
        <referenceContainer name="content">
            <container name="product.view.container" htmlTag="div" htmlClass="product-view">
                <container name="product.view.wrapper" htmlTag="div" htmlClass="container-fluid px-4 px-lg-5">
                    <!-- Breadcrumbs -->
                    <block class="Magento\Theme\Block\Html\Breadcrumbs" name="product.breadcrumbs" template="Magento_Theme::html/breadcrumbs.phtml" before="product.info.main">
                        <arguments>
                            <argument name="cssClass" xsi:type="string">product-breadcrumbs</argument>
                        </arguments>
                    </block>
                    
                    <!-- Product Main Info Row Container -->
                    <container name="product.main.row" htmlTag="div" htmlClass="row g-4 product-main-row">
                        <!-- Product Media Column -->
                        <container name="product.media.column" htmlTag="div" htmlClass="col-lg-6 product-media-column"/>
                        
                        <!-- Product Info Column -->
                        <container name="product.info.column" htmlTag="div" htmlClass="col-lg-6 product-info-column"/>
                    </container>
                </container>
            </container>
        </referenceContainer>
        
        <!-- Move product.info.media to product.media.column -->
        <move element="product.info.media" destination="product.media.column" after="-" />
        
        <!-- Move product.info.main to product.info.column -->
        <move element="product.info.main" destination="product.info.column" after="-" />
        
        <!-- Move product.info.details after product.main.row -->
        <move element="product.info.details" destination="product.view.wrapper" after="product.main.row" />
        
        <!-- Move related products after product.info.details -->
        <move element="catalog.product.related" destination="product.view.wrapper" after="product.info.details" />
        
        <!-- Move upsell products after related -->
        <move element="product.info.upsell" destination="product.view.wrapper" after="catalog.product.related" />
        
        <!-- Ensure product media gallery is properly configured -->
        <referenceBlock name="product.info.media">
            <arguments>
                <argument name="gallery_options" xsi:type="object">Magento\Catalog\Block\Product\View\GalleryOptions</argument>
            </arguments>
        </referenceBlock>
        
        <!-- Override templates with custom design -->
        <referenceBlock name="product.info.media">
            <action method="setTemplate">
                <argument name="template" xsi:type="string">Magento_Catalog::product/view/gallery.phtml</argument>
            </action>
        </referenceBlock>
        
        <referenceBlock name="product.info.main">
            <action method="setTemplate">
                <argument name="template" xsi:type="string">Magento_Catalog::product/view/info.phtml</argument>
            </action>
        </referenceBlock>
        
        <referenceBlock name="product.info.details">
            <action method="setTemplate">
                <argument name="template" xsi:type="string">Magento_Catalog::product/view/details.phtml</argument>
            </action>
        </referenceBlock>
        
        <!-- Ensure Add to Cart block is properly configured with custom template -->
        <referenceBlock name="product.info.addtocart">
            <action method="setTemplate">
                <argument name="template" xsi:type="string">Magento_Catalog::product/view/addtocart.phtml</argument>
            </action>
        </referenceBlock>
        
        <!-- Image Zoom Modal -->
        <referenceContainer name="content">
            <block class="Magento\Framework\View\Element\Template" 
                   name="product.zoom.modal" 
                   template="Magento_Catalog::product/view/zoom-modal.phtml" 
                   after="product.view.container"/>
        </referenceContainer>
        
        <!-- Add Product Detail JavaScript -->
        <referenceContainer name="before.body.end">
            <block class="Magento\Framework\View\Element\Template" 
                   name="product.detail.js" 
                   template="Magento_Catalog::product/view/js.phtml"/>
        </referenceContainer>
    </body>
</page>
