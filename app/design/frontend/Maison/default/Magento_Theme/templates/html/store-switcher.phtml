<?php
/**
 * Maison de Pierre - Language/Store Switcher
 */
$objectManager = \Magento\Framework\App\ObjectManager::getInstance();
$storeManager = $objectManager->get('\Magento\Store\Model\StoreManagerInterface');
$currentStore = $storeManager->getStore();
$stores = $storeManager->getStores();
?>
<a href="#" class="icon-link-custom language-toggle d-none d-lg-flex" id="langSwitcher" data-bs-toggle="dropdown">
    <i data-feather="globe"></i>
    <span class="d-none d-lg-inline current-lang"><?= $currentStore->getCode() === 'arabic' ? 'AR' : 'EN' ?></span>
</a>

<ul class="dropdown-menu" aria-labelledby="langSwitcher">
    <?php foreach ($stores as $store): ?>
        <li>
            <a class="dropdown-item <?= $currentStore->getCode() === $store->getCode() ? 'active' : '' ?>" 
               href="<?= $block->escapeUrl($store->getUrl()) ?>">
                <?= $store->getName() ?> (<?= strtoupper($store->getCode() === 'arabic' ? 'AR' : 'EN') ?>)
            </a>
        </li>
    <?php endforeach; ?>
</ul>

